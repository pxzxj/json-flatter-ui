(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{6369:function(e,l,t){Promise.resolve().then(t.bind(t,2241))},2241:function(e,l,t){"use strict";t.r(l);var i=t(7437),n=t(2265),r=t(8405),s=t(6069),o=t(5653),a=t(7893),d=t(3427),c=t(1351),f=t(2969),u=t(762),h=t(5960),g=t(2192),F=t.n(g),p=t(4606),m=t(6820);let j={columns:[{title:"Name",dataIndex:"name"}],data:[{key:"1",name:"Josh Long"}]};function b(e,l,t,i){let n=i.ignoreFields,r=i.flatFields,s=i.joinFields;if(!n.includes(l)){if(e instanceof Array){if(s.includes(l)){if(e.length>0){if(e[0]instanceof Object){let n=[],r=new Set;for(let t in e){let s=e[t],o={};for(let e in b(s,l,o,i),n.push(o),o)r.add(e)}for(let e of r)t[e]=n.map(l=>l[e]).filter(e=>null!=e).join(", ")}else{let n=[];for(let t in e){let r=e[t],s={};for(let e in b(r,l,s,i),s)n.push(s[e])}t[l]=n.join(", ")}}}else throw alert(l+" node type is array, it must be ignore or join"),Error(l+" node type is array, it must be ignore or join")}else if(e instanceof Object){if(r.includes(l))for(let n in e)b(e[n],l+"."+n,t,i);else throw alert(l+" node type is object, it must be ignore or flat"),Error(l+" node type is object, it must be ignore or flat")}else t[l]=e}}l.default=function(){let{TextArea:e}=s.default,[l,t]=(0,n.useState)(""),[g,y]=(0,n.useState)([{title:"ROOT",key:"ROOT",path:""}]),[k,x]=(0,n.useState)(j),[O,v]=(0,n.useState)({ignoreFields:[],flatFields:[],joinFields:[],mergeFields:[],camelToUnderscore:!0}),w=F()(O),R=[{key:"setRoot",label:"Set as rootField"},{key:"ignoreField",label:"IgnoreField"},{key:"mergeField",label:"MergeField"},{key:"flatField",label:"FlatField"},{key:"joinField",label:"JoinField"},{key:"unIgnoreField",label:"UnIgnoreField"},{key:"unMergeField",label:"UnMergeField"},{key:"unFlatField",label:"UnFlatField"},{key:"unJoinField",label:"UnJoinField"}];return(0,i.jsxs)(a.Z,{wrap:"wrap",gap:"middle",vertical:!1,children:[(0,i.jsx)("div",{style:{width:"33%"},children:(0,i.jsx)(e,{value:l,onChange:e=>t(e.target.value),onBlur:()=>y(function(e){let l=null;try{l=JSON.parse(e)}catch(e){}if(null==l)return alert("illegal json"),[{title:"ROOT",key:"ROOT",path:""}];let t=[{title:"ROOT",key:"ROOT",path:""}];return function e(l,t,n,r){if(l instanceof Array){if(t.icon=(0,i.jsx)(m.mBz,{}),l.length>0){let i=[];for(let t in l){let s=n+"."+t,o={title:t.toString(),key:s,path:r};e(l[t],o,s,r),i.push(o)}t.children=i}}else if(l instanceof Object){t.icon=(0,i.jsx)(p.rb6,{});let s=[];for(let t in l){let i=n+"."+t,o=r;""!=o&&(o+="."),o+=t;let a={title:t,key:i,path:o};e(l[t],a,i,o),s.push(a)}s.length>0&&(t.children=s)}else null!=l&&"string"==typeof l&&(l='"'+l+'"'),t.title+=": "+l}(l,t[0],"ROOT",""),t}(l)),autoSize:{minRows:10,maxRows:15}})}),(0,i.jsx)("div",{style:{width:"30%"},children:(0,i.jsx)(d.Z,{showIcon:!0,defaultExpandAll:!0,titleRender:e=>(0,i.jsx)(o.Z,{menu:{items:R,onClick:l=>{let{key:t}=l,i=e.path,{...n}=O;switch(t){case"setRoot":n.rootField=i;break;case"ignoreField":n.ignoreFields.push(i);break;case"mergeField":n.mergeFields.push(i);break;case"flatField":n.flatFields.push(i);break;case"joinField":n.joinFields.push(i);break;case"unIgnoreField":let r=n.ignoreFields.indexOf(i);-1!=r&&n.ignoreFields.splice(r,1);break;case"unMergeField":let s=n.mergeFields.indexOf(i);-1!=s&&n.mergeFields.splice(s,1);break;case"unFlatField":let o=n.flatFields.indexOf(i);-1!=o&&n.flatFields.splice(o,1);break;case"unJoinField":let a=n.joinFields.indexOf(i);-1!=a&&n.joinFields.splice(a,1)}v(n)}},trigger:["contextMenu"],children:(0,i.jsx)("span",{children:e.title})}),switcherIcon:(0,i.jsx)(r.Z,{}),treeData:g})}),(0,i.jsxs)("div",{style:{width:"33%"},children:[(0,i.jsx)(e,{value:w,autoSize:{minRows:9,maxRows:15}}),(0,i.jsxs)(c.Z,{children:[(0,i.jsx)("span",{children:"camelToUnderscore"}),(0,i.jsx)(f.Z,{defaultChecked:!0,onChange:e=>{let{...l}=O;l.camelToUnderscore=e,v(l)}}),(0,i.jsx)(u.ZP,{type:"primary",danger:!0,onClick:()=>{v({ignoreFields:[],flatFields:[],joinFields:[],mergeFields:[],camelToUnderscore:!0})},children:"Reset"}),(0,i.jsx)(u.ZP,{type:"primary",onClick:()=>{x(function(e,l){let t=JSON.parse(e),i=[],n=[];""!=l.rootField&&null!=l.rootField&&void 0!=l.rootField&&(i=l.rootField.split("."));try{!function e(l,t,i,n,r,s){if(0==i.length){if(l instanceof Array)for(let o in l)e(l[o],t,i,n,r,s);else if(l instanceof Object){let e={};for(let i in l){let n=i;""!=t&&(n=t+"."+i),b(l[i],n,e,s)}for(let l in r)e[l]=r[l];n.push(e)}else{let e={};for(let i in b(l,t,e,s),r)e[i]=r[i];n.push(e)}}else if(l instanceof Array)for(let o in l){let a=l[o],{...d}=r;e(a,t,i,n,d,s)}else if(l instanceof Object){!function(l,t,i,n,r){let s=r.mergeFields;for(let o in s){let a,d;let c=s[o];if(c.startsWith(l)&&(a=""!=l?-1!=(d=c.indexOf(".",l.length+1))?c.substring(l.length+1,d):c.substring(l.length+1):-1!=(d=c.indexOf("."))?c.substring(0,d):c)!=t){let t=[],s=n[a],o=[];-1!=d&&(o=c.substring(d+1).split("."));let f=l+"."+a;if(""==l&&(f=a),void 0!=s){if(e(s,f,o,t,{},r),1==t.length){let e=t[0];for(let l in e)i[l]=e[l]}else throw alert("merge field "+mergedPath+" cannot have multiple values!"),Error("merge field "+mergedPath+" cannot have multiple values!")}else alert("merge field "+mergedPath+" not found!")}}}(t,i[0],r,l,s);let o=l[i[0]];""!=t?t+="."+i[0]:t+=i[0],void 0!=o?e(o,t,i.slice(1,i.length),n,r,s):alert("jsonNode not found for path "+t)}else alert("traverse end, cause "+t+" is not array or object!")}(t,"",i,n,{},l)}catch(e){console.error("捕获到异常：",e)}if(l.camelToUnderscore){let e=[];for(let l=0;l<n.length;l++){let t=n[l],i={};for(let e in t)i[function(e){let l=e.charAt(0);for(let r=1;r<e.length-1;r++){var t,i,n;t=e.charAt(r-1),i=e.charAt(r),n=e.charAt(r+1),/[a-z]/.test(t)&&/[A-Z]/.test(i)&&/[a-z]/.test(n)&&(l+="_"),l+=e.charAt(r)}return l+=e.charAt(e.length-1),l=l.toLowerCase().replaceAll(".","_")}(e)]=t[e];e.push(i)}n=e}let r=j;if(n.length>0){let e=[],l=n[0];for(let t in l)e.push({title:t,dataIndex:t});for(let e in n)n[e].key=e.toString();r={columns:e,data:n}}return r}(l,O))},children:"Flat"})]})]}),(0,i.jsx)("div",{children:(0,i.jsx)(h.Z,{columns:k.columns,dataSource:k.data,pagination:!1})})]})}}},function(e){e.O(0,[447,115,430,971,938,744],function(){return e(e.s=6369)}),_N_E=e.O()}]);